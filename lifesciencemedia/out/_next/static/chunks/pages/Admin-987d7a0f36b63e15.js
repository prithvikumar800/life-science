(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{2223:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin",function(){return r(7629)}])},7629:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(4848),s=r(6540),l=r(7037),i=r(3093);r(4338);var o=r(6665);let n=()=>{let[e,t]=(0,s.useState)("Admin"),[r,n]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[f,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),N=async a=>{if(a.preventDefault(),m!==h){i.oR.error("Passwords do not match");return}if(10!==x.length){i.oR.error("Mobile number must be exactly 10 digits");return}j(!0);try{let a=(await o.I.auth().createUserWithEmailAndPassword(c,m)).user;await o.I.firestore().collection("users").doc(a.uid).set({name:r,email:c,mobile:x,role:e,uid:a.uid}),i.oR.success("Account Created successfully!"),n(""),d(""),u(""),p(""),g(""),t("Admin")}catch(e){"auth/email-already-in-use"===e.code?i.oR.error("Email already in use"):i.oR.error(e.message)}j(!1)};return(0,a.jsxs)("div",{className:"bg-white font-[sans-serif] min-h-screen flex flex-col items-center justify-center py-6 px-4",children:[(0,a.jsxs)("div",{className:"max-w-md w-full border p-8 rounded-md bg-gray-100",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(l.p7b,{size:80,className:"text-gray-600 inline-block"})}),(0,a.jsxs)("form",{className:"mt-12 space-y-4",onSubmit:N,children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center justify-center mb-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"role",value:"Admin",checked:"Admin"===e,onChange:()=>t("Admin"),className:"hidden"}),(0,a.jsx)(l.aBc,{className:"w-5 h-5 ".concat("Admin"===e?"text-blue-600":"text-gray-400")}),(0,a.jsx)("span",{className:"text-gray-800",children:"Admin"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"role",value:"Employee",checked:"Employee"===e,onChange:()=>t("Employee"),className:"hidden"}),(0,a.jsx)(l.x$1,{className:"w-5 h-5 ".concat("Employee"===e?"text-blue-600":"text-gray-400")}),(0,a.jsx)("span",{className:"text-gray-800",children:"Employee"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"role",value:"User",checked:"User"===e,onChange:()=>t("User"),className:"hidden"}),(0,a.jsx)(l.x$1,{className:"w-5 h-5 ".concat("User"===e?"text-blue-600":"text-gray-400")}),(0,a.jsx)("span",{className:"text-gray-800",children:"User"})]})]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{name:"name",type:"text",required:!0,value:r,onChange:e=>n(e.target.value),className:"w-full text-sm text-gray-800 bg-white border-2 border-transparent focus:border-[#1E2772] pl-4 pr-8 py-3 rounded-md outline-none",placeholder:"Enter name"}),(0,a.jsx)(l.x$1,{className:"w-5 h-5 absolute right-4 text-gray-400"})]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{name:"email",type:"email",required:!0,value:c,onChange:e=>d(e.target.value),className:"w-full text-sm text-gray-800 bg-white border-2 border-transparent focus:border-[#1E2772] pl-4 pr-8 py-3 rounded-md outline-none",placeholder:"Enter email"}),(0,a.jsx)(l.maD,{className:"w-5 h-5 absolute right-4 text-gray-400"})]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{name:"mobile",type:"text",required:!0,value:x,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length<=10&&u(t)},className:"w-full text-sm text-gray-800 bg-white border-2 border-transparent focus:border-[#1E2772] pl-4 pr-8 py-3 rounded-md outline-none",placeholder:"Enter mobile number",maxLength:"10"}),(0,a.jsx)(l.Cab,{className:"w-5 h-5 absolute right-4 text-gray-400"})]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{name:"password",type:f?"text":"password",required:!0,value:m,onChange:e=>p(e.target.value),className:"w-full text-sm text-gray-800 bg-white border-2 border-transparent focus:border-[#1E2772] pl-4 pr-8 py-3 rounded-md outline-none",placeholder:"Enter password"}),f?(0,a.jsx)(l.mx3,{className:"w-5 h-5 absolute right-4 text-gray-400 cursor-pointer",onClick:()=>b(!1)}):(0,a.jsx)(l.Ny1,{className:"w-5 h-5 absolute right-4 text-gray-400 cursor-pointer",onClick:()=>b(!0)})]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",{name:"confirm-password",type:f?"text":"password",required:!0,value:h,onChange:e=>g(e.target.value),className:"w-full text-sm text-gray-800 bg-white border-2 border-transparent focus:border-[#1E2772] pl-4 pr-8 py-3 rounded-md outline-none",placeholder:"Confirm password"}),f?(0,a.jsx)(l.mx3,{className:"w-5 h-5 absolute right-4 text-gray-400 cursor-pointer",onClick:()=>b(!1)}):(0,a.jsx)(l.Ny1,{className:"w-5 h-5 absolute right-4 text-gray-400 cursor-pointer",onClick:()=>b(!0)})]}),(0,a.jsx)("div",{className:"!mt-6",children:(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full py-2.5 px-4 text-base font-semibold rounded-md text-white bg-[#1E2772] hover:bg-[#1e4272] focus:outline-none",children:y?"Submitting...":"Submit"})})]})]}),(0,a.jsx)(i.N9,{})]})};var c=r(8869),d=r(9196);let x=e=>{let{userData:t,loading:r}=e,[l,n]=(0,s.useState)([{titleName:"",subtitleName:"",result:"",theoretical:""}]),[x,u]=(0,s.useState)({certificateCategory:"None",certificateTitle:"",materialCode:"",lotno:"",mfgDate:"",expiryDate:"",customCategory:""}),[m,p]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[N,v]=(0,s.useState)(null),[w,C]=(0,s.useState)(null),E=e=>{n(l.filter((t,r)=>r!==e))},k=(e,t,r)=>{n(l.map((a,s)=>s===e?{...a,[t]:r}:a))},S=(e,t)=>{if(u(r=>({...r,[e]:t,..."certificateCategory"===e&&"None"!==t?{customCategory:""}:{}})),"certificateCategory"===e){var r;console.log("Selected Category:",t),console.log("Fetched Data:",N);let e=null==N?void 0:N.find(e=>e.certificateCategory===t);console.log("Selected Category Data:",e),(null==e?void 0:null===(r=e.rows)||void 0===r?void 0:r.length)?n(e.rows):n([{titleName:"",subtitleName:"",result:"",theoretical:""}])}},D=e=>{u({...e}),n(e.rows),C(e.id),b(!0)},R=async e=>{if(e.preventDefault(),j(!0),console.log("rows",l),!x.materialCode||!x.mfgDate||!x.certificateTitle){i.oR.error("Material Code, Manufacturing Date, and Certificate Title are required!"),j(!1);return}for(let e of l){let t=e.theoretical.match(/(\d+)-(\d+)/);if(t){let r=parseInt(t[1],10),a=parseInt(t[2],10),s=e.result.match(/(\d+)-(\d+)/);if(s){let e=parseInt(s[1],10),t=parseInt(s[2],10);if(isNaN(e)||isNaN(t)){i.oR.error("Result must be a valid range with numbers!"),j(!1);return}if(e<r||t>a){i.oR.error("Result must be between ".concat(r," and ").concat(a)),console.log("error","Result must be between ".concat(r," and ").concat(a)),j(!1);return}}else{let t=parseInt(e.result.replace(/\D/g,""),10);if(isNaN(t)){i.oR.error("Result must be a valid number!"),j(!1);return}if(t<r||t>a){i.oR.error("Result must be between ".concat(r," and ").concat(a)),console.log("error","Result must be between ".concat(r," and ").concat(a)),j(!1);return}}}}let r=new Date(x.mfgDate);if(isNaN(r)){i.oR.error("Invalid manufacturing date!"),j(!1);return}let a=String(r.getDate()).padStart(2,"0"),s=String(r.getMonth()+1).padStart(2,"0"),n=r.getFullYear(),c="".concat(x.materialCode).concat(a).concat(s).concat(n.toString().slice(-2));console.log("Generated Lot No:",c);let d={...x,lotno:c};console.log("Updated certificate data:",d);let u="None"!==x.certificateCategory?x.certificateCategory:x.customCategory||"";if("None"===x.certificateCategory&&!x.customCategory){i.oR.error("Please enter a custom category!"),j(!1);return}let m={...d,certificateCategory:u,customCategory:"",rows:l,employeename:null==t?void 0:t.name,employemobile:null==t?void 0:t.mobile,employeeid:null==t?void 0:t.uid,Verified:"False"};try{let e=o.I.firestore();w?(await e.collection("certificate").doc(w).update(m),i.oR.success("Certificate updated successfully!")):(await e.collection("certificate").add(m),i.oR.success("Certificate created successfully!")),b(!1),A()}catch(e){console.error("Error submitting certificate: ",e),i.oR.error("There was an error submitting the certificate.")}finally{j(!1)}},A=async()=>{let e=o.I.firestore();try{let t=(await e.collection("certificate").get()).docs.map(e=>({id:e.id,...e.data()}));v(t)}catch(e){console.error("Error fetching data: ",e),i.oR.error("There was an error fetching the data.")}};(0,s.useEffect)(()=>{A()},[]);let T=async(e,t)=>{let r=o.I.firestore();try{await r.collection("certificate").doc(e).update({Verified:t}),i.oR.success("Verification status updated successfully!"),A()}catch(e){console.error("Error updating verification status: ",e),i.oR.error("There was an error updating the verification status.")}};return r?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("div",{className:"spinner-border animate-spin inline-block w-16 h-16 border-4 rounded-full border-t-blue-500 border-gray-200"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"w-full bg-gradient-to-r from-blue-50 to-blue-100 p-8 rounded-xl shadow-xl",children:[(0,a.jsxs)("h1",{className:"md:text-4xl text-xl font-semibold text-center text-blue-600 mb-6",children:["Welcome, ",null==t?void 0:t.name]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 ease-in-out",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Name:"}),(0,a.jsx)("span",{className:"text-gray-900",children:null==t?void 0:t.name})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 ease-in-out",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Email:"}),(0,a.jsx)("span",{className:"text-gray-900",children:null==t?void 0:t.email})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 ease-in-out",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Mobile Number:"}),(0,a.jsx)("span",{className:"text-gray-900",children:null==t?void 0:t.mobile})]})]})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-white flex  px-4",children:[(0,a.jsx)("button",{onClick:()=>b(e=>!e),className:"fixed bottom-20 right-4 ".concat(f?"bg-red-600":"bg-teal-600"," text-white py-3 px-6 rounded-full shadow-lg hover:opacity-90 focus:outline-none transition duration-200"),children:f?"Close":"Create Certificate"}),(0,a.jsxs)("div",{className:"w-full  bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-center text-teal-600 mb-6",children:"Certificate Data"}),(0,a.jsx)(i.N9,{}),N&&N.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full table-auto border-collapse bg-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Certificate Title"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Employee Name"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Material Code"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Expiry Date"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Lot Number"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Verification Status"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Verify Status"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:N.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-teal-50",children:[(0,a.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:[t+1,".",e.certificateTitle]}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:e.employeename}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:e.materialCode}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:e.expiryDate}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:e.lotno}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:"True"===e.Verified?(0,a.jsx)("span",{className:"text-green-600 font-semibold",children:"Verified"}):(0,a.jsx)("span",{className:"text-red-600 font-semibold",children:"Pending"})}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:(0,a.jsxs)("select",{value:e.Verified,onChange:t=>T(e.id,t.target.value),className:"border p-2 rounded-md",children:[(0,a.jsx)("option",{value:"True",children:"True"}),(0,a.jsx)("option",{value:"False",children:"False"})]})}),(0,a.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:[(0,a.jsx)("button",{onClick:()=>{p(e),g(!0)},className:"text-teal-600 hover:text-teal-800",children:"View PDF"}),(0,a.jsx)("button",{onClick:()=>D(e),className:"text-teal-600 ml-4 uppercase hover:text-teal-800",children:"Edit"})]})]},t))})]})}):(0,a.jsx)("p",{className:"text-center text-gray-600",children:"No certificate data found."})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-md shadow-lg w-full h-full p-8 overflow-y-auto",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{b(!1),u({certificateCategory:"None",certificateTitle:"",materialCode:"",lotno:"",mfgDate:"",expiryDate:"",customCategory:""}),n([{titleName:"",subtitleName:"",result:"",theoretical:""}])},className:"absolute top-4 right-4 font-bold text-red-600 hover:text-red-800",children:(0,a.jsx)(c.yGN,{size:32})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-teal-800 mb-6 text-center",children:"Add Certificate Details"}),(0,a.jsxs)("form",{onSubmit:R,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"relative z-0 w-full group",children:[(0,a.jsxs)("select",{id:"certificateCategory",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-teal-600 peer",value:x.certificateCategory||"None",onChange:e=>S("certificateCategory",e.target.value),children:[(0,a.jsx)("option",{value:"None",children:"None"}),[...new Set(null==N?void 0:N.map(e=>e.certificateCategory))].map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]}),(0,a.jsx)("label",{htmlFor:"certificateCategory",className:"absolute text-sm text-gray-500 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] left-0 peer-focus:left-0 peer-focus:text-teal-600 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:translate-y-[-20px] peer-focus:scale-75 transition-all duration-200",children:"Certificate Category"}),"None"===x.certificateCategory&&(0,a.jsx)("input",{type:"text",id:"customCategory",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-teal-600 peer",placeholder:"Enter custom category",value:x.customCategory||"",onChange:e=>S("customCategory",e.target.value)})]}),(0,a.jsxs)("div",{className:"relative z-0 w-full group",children:[(0,a.jsx)("input",{type:"text",id:"certificateTitle",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-teal-600 peer",placeholder:" ",value:x.certificateTitle,onChange:e=>S("certificateTitle",e.target.value)}),(0,a.jsx)("label",{htmlFor:"certificateTitle",className:"absolute text-sm text-gray-500 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] left-0 peer-focus:left-0 peer-focus:text-teal-600 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:translate-y-[-20px] peer-focus:scale-75 transition-all duration-200",children:"Certificate Title"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:(0,a.jsxs)("div",{className:"relative z-0 w-full group",children:[(0,a.jsx)("input",{type:"text",id:"materialCode",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-teal-600 peer",placeholder:" ",value:x.materialCode,onChange:e=>S("materialCode",e.target.value)}),(0,a.jsx)("label",{htmlFor:"materialCode",className:"absolute text-sm text-gray-500 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] left-0 peer-focus:left-0 peer-focus:text-teal-600 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:translate-y-[-20px] peer-focus:scale-75 transition-all duration-200",children:"Material Code"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"relative z-0 w-full group",children:[(0,a.jsx)("input",{type:"date",id:"mfgDate",value:x.mfgDate,onChange:e=>S("mfgDate",e.target.value),className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-teal-600 peer",placeholder:" "}),(0,a.jsx)("label",{htmlFor:"mfgDate",className:"absolute text-sm text-gray-500 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] left-0 peer-focus:left-0 peer-focus:text-teal-600 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:translate-y-[-20px] peer-focus:scale-75 transition-all duration-200",children:"Manufacturing Date"})]}),(0,a.jsxs)("div",{className:"relative z-0 w-full group",children:[(0,a.jsx)("input",{type:"date",id:"expiryDate",value:x.expiryDate,onChange:e=>S("expiryDate",e.target.value),className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-teal-600 peer",placeholder:" "}),(0,a.jsx)("label",{htmlFor:"expiryDate",className:"absolute text-sm text-gray-500 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] left-0 peer-focus:left-0 peer-focus:text-teal-600 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:translate-y-[-20px] peer-focus:scale-75 transition-all duration-200",children:"Expiry Date"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,a.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-teal-50",children:[(0,a.jsx)("th",{className:"border text-center border-gray-300 px-4 py-2 text-teal-800",children:"Pre-plated Medium/20 dishes"}),(0,a.jsx)("th",{className:"border text-center border-gray-300 px-4 py-2 text-teal-800",children:"Result"}),(0,a.jsx)("th",{className:"border text-center border-gray-300 px-4 py-2 text-teal-800",children:"Theoretical Results"}),(0,a.jsx)("th",{className:"border text-center border-gray-300 px-4 py-2 text-teal-800",children:"Action"})]})}),(0,a.jsx)("tbody",{children:l.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("input",{type:"text",placeholder:"Enter Title Name",className:"block py-2 px-3 w-full text-sm text-gray-900 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500",value:e.titleName,onChange:e=>k(t,"titleName",e.target.value)})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:"Enter Subtitle Name",className:"block py-2 px-3 w-full text-sm text-gray-900 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500",value:e.subtitleName,onChange:e=>k(t,"subtitleName",e.target.value)})})]}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,a.jsx)("input",{type:"text",placeholder:"Enter Results",className:"block py-2 px-3 w-full text-sm text-gray-900 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500",value:e.result,onChange:e=>k(t,"result",e.target.value)})}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,a.jsx)("input",{type:"text",placeholder:"Enter Theoretical Results",className:"block py-2 px-3 w-full text-sm text-gray-900 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500",value:e.theoretical,onChange:e=>k(t,"theoretical",e.target.value)})}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:(0,a.jsx)("button",{type:"button",className:"text-red-500 hover:text-red-700",onClick:()=>E(t),children:(0,a.jsx)(c.IXo,{size:20})})})]},t))})]})}),(0,a.jsx)("button",{type:"button",className:"w-full mb-6 py-2 px-4 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition duration-300",onClick:()=>{n([...l,{titleName:"",subtitleName:"",result:"",theoretical:""}])},children:"Add Row"}),(0,a.jsx)("button",{type:"submit",className:"py-2 px-4 bg-teal-600 text-white rounded hover:bg-teal-800",disabled:y,children:y?"Submitting...":"Submit"})]})]})}),h&&m&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full h-[100vh] overflow-y-auto relative",children:[(0,a.jsx)("button",{onClick:()=>g(!1),className:"absolute top-4  right-4 text-red-500 font-bold hover:text-red-700",children:(0,a.jsx)(c.yGN,{size:32})}),(0,a.jsx)(d.A,{data:m})]})}),(0,a.jsx)(i.N9,{})]})]})},u=()=>(0,a.jsx)("div",{children:"Data"}),m=()=>{let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{try{let e=o.I.firestore().collection("users"),r=(await e.get()).docs.map(e=>e.data());t(r)}catch(e){i.oR.error("Error fetching users: "+e.message)}finally{n(!1)}})()},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-r from-blue-100 to-blue-300 flex flex-col items-center py-8 px-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Users List"}),r?(0,a.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full border-t-4 border-blue-600 w-20 h-20"})}):(0,a.jsx)("div",{className:"w-full max-w-5xl",children:e.length>0?(0,a.jsx)("ul",{className:"space-y-6",children:e.map((e,t)=>(0,a.jsx)("li",{className:"bg-white p-6 rounded-lg shadow-xl hover:shadow-2xl transition duration-300 ease-in-out transform hover:scale-105",children:(0,a.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,a.jsx)(l.x$1,{className:"text-4xl text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-2xl font-semibold text-gray-800",children:[e.name," (",e.role,") "]}),(0,a.jsx)("p",{className:"text-gray-700",children:e.email}),(0,a.jsx)("p",{className:"text-gray-700",children:e.mobile})]})]})},t))}):(0,a.jsx)("p",{className:"text-gray-700 font-medium",children:"No users found"})}),(0,a.jsx)(i.N9,{})]})};var p=r(6715),h=r(3596),g=r(354),f=r.n(g);let b=()=>{let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(null),i=(0,s.useRef)(),[n,c]=(0,s.useState)(!1),[d,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");c(e.matches);let t=e=>{c(e.matches)};return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}},[]);let u=async()=>{let e=o.I.firestore();try{let r=(await e.collection("certificate").get()).docs.map(e=>({id:e.id,...e.data()}));t(r)}catch(e){console.error("Error fetching data: ",e)}finally{x(!1)}};(0,s.useEffect)(()=>{u()},[]);let m=[...new Set(e.map(e=>e.certificateCategory))],p=r?e.filter(e=>e.certificateCategory===r):e,g=e=>{f()(i.current).then(t=>{let r=t.toDataURL("image/png"),a=new h.Ay;a.addImage(r,"PNG",10,10,190,0);let s=e?"".concat(e.replace(/\s+/g,"_"),".pdf"):"certificate.pdf";a.save(s)})};return(0,a.jsx)("div",{children:d?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-5 flex p-4 flex-wrap gap-3",children:[(0,a.jsx)("button",{onClick:()=>l(null),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(null===r?"bg-blue-600 text-white uppercase shadow-md":"bg-gray-200 uppercase text-gray-800 hover:bg-gray-300"),children:"Show All"}),m.map(e=>(0,a.jsx)("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(r===e?"bg-blue-600 uppercase text-white shadow-md":"bg-gray-200 uppercase text-gray-800 hover:bg-gray-300"),children:e},e))]}),p.map(e=>(0,a.jsxs)("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",marginBottom:"40px",lineHeight:"1.6",backgroundColor:n?"#333":"#fff",color:"#000"},children:[(0,a.jsxs)("div",{ref:i,style:{maxWidth:"800px",margin:"0 auto",padding:"20px",border:n?"2px solid #555":"2px solid #ddd",backgroundColor:"#fff",color:"#000",position:"relative"},children:[(0,a.jsx)("div",{className:"logo",style:{position:"absolute",top:"40%",width:"100%",maxWidth:"600px",left:"50%",transform:"translate(-50%, -50%)"},children:(0,a.jsx)("img",{src:"/logo.png",style:{width:"665px",opacity:"0.2",transform:"rotate(-35deg)"}})}),(0,a.jsx)("img",{src:"/logo.png",alt:"Logo",style:{maxWidth:"200px",marginBottom:"20px"}}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{className:"text-xl font-bold",style:{textAlign:"center",border:"2px solid #000",padding:"5px 15px",display:"inline-block",margin:"20px 0"},children:(0,a.jsx)("b",{children:"Quality Control Certificate"})}),(0,a.jsx)("h2",{className:"uppercase",style:{textAlign:"center",margin:"5px 0px",fontWeight:"bold",color:"#000"},children:e.certificateTitle})]}),(0,a.jsx)("div",{style:{margin:"20px 0"},children:(0,a.jsxs)("div",{style:{display:"flex",gap:"20px",width:"40%",margin:"0 auto",fontWeight:"bold",color:"#000"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"Material Code"}),(0,a.jsx)("div",{children:"Lot. No."}),(0,a.jsx)("div",{children:"Mfg. Date"}),(0,a.jsx)("div",{children:"Expiry Date"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:":"}),(0,a.jsx)("div",{children:":"}),(0,a.jsx)("div",{children:":"}),(0,a.jsx)("div",{children:":"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"uppercase",children:e.materialCode}),(0,a.jsx)("div",{className:"uppercase",children:e.lotno}),(0,a.jsx)("div",{className:"uppercase",children:e.mfgDate}),(0,a.jsx)("div",{className:"uppercase",children:e.expiryDate})]})]})}),(0,a.jsx)("div",{style:{width:"760px"},children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",margin:"20px 0",border:"1px solid ".concat(n?"#fff":"#000")},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{border:"1px solid #000",padding:"5px",textAlign:"left"},children:"Pre-plated Medium/20 dishes"}),(0,a.jsx)("th",{style:{border:"1px solid #000",padding:"5px",textAlign:"left"},children:"Results"}),(0,a.jsx)("th",{style:{border:"1px solid #000",padding:"5px",textAlign:"left"},children:"Theoretical Results"})]})}),(0,a.jsx)("tbody",{children:e.rows.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{style:{border:"1px solid #000",padding:"5px",textAlign:"left"},children:[e.titleName&&(0,a.jsx)("strong",{className:"uppercase",children:e.titleName}),e.subtitleName&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"uppercase",style:{color:"#000"},children:e.subtitleName})]})]}),(0,a.jsx)("td",{className:"uppercase",style:{border:"1px solid #000",padding:"5px",textAlign:"left"},children:e.result}),(0,a.jsx)("td",{className:"uppercase",style:{border:"1px solid #000",padding:"5px",textAlign:"left"},children:e.theoretical})]},t))})]})}),(0,a.jsxs)("div",{style:{textAlign:"right",margin:"40px 0"},children:[(0,a.jsx)("img",{src:"https://signaturely.com/wp-content/uploads/2020/04/unreadable-letters-signaturely.svg",alt:"Signature",style:{width:"150px",display:"block",marginLeft:"auto"}}),(0,a.jsx)("b",{style:{display:"block",marginTop:"5px"},children:"Signature of Quality Head"})]}),(0,a.jsx)("hr",{style:{height:"1px",backgroundColor:"black"}}),(0,a.jsxs)("div",{style:{textAlign:"center",marginTop:"40px",fontSize:"0.9em"},children:[(0,a.jsx)("h2",{children:(0,a.jsx)("b",{children:"LIFE SCIENCE MEDIA"})}),(0,a.jsx)("p",{children:"Plot No - 3, 4th Floor, Rishi kunj, Kirti Nagar, GURGAON - HR- 122007"}),(0,a.jsxs)("p",{children:["Tel: 9958007455, 9560098518 Email:"," ",(0,a.jsx)("a",{href:"mailto:info@lifesciencemedia.in",children:"info@lifesciencemedia.in"})]})]})]}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",margin:"10px 0"},children:(0,a.jsx)("button",{onClick:()=>g(e.certificateTitle),style:{padding:"10px 20px",backgroundColor:"#0077ff",color:"#fff",border:"none",cursor:"pointer"},children:"Download"})})]}))]})})},y=()=>{let[e,t]=(0,s.useState)("home"),[r,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),h=(0,p.useRouter)();(0,s.useEffect)(()=>{let e=o.I.auth().onAuthStateChanged(async e=>{if(e)try{let t=o.I.firestore().collection("users").doc(e.uid),r=await t.get();r.exists?i(r.data()):console.log("No such user!")}catch(e){console.error("Error fetching user data:",e)}finally{d(!1)}else d(!1),h.push("/")});return()=>e()},[h]);let g=async()=>{try{await o.I.auth().signOut(),h.push("/")}catch(e){console.error("Logout failed:",e)}};return c?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("div",{className:"spinner-border animate-spin inline-block w-16 h-16 border-4 rounded-full border-t-blue-500 border-gray-200"})}):(0,a.jsxs)("div",{className:"flex flex-col h-screen justify-between",children:[(0,a.jsxs)("div",{className:" ",children:["home"===e&&(0,a.jsx)("div",{children:(0,a.jsx)(x,{userData:r})}),"Certificates"===e&&(0,a.jsx)("div",{children:(0,a.jsx)(b,{})}),"data"===e&&(0,a.jsx)("div",{children:(0,a.jsx)(u,{})}),"employee"===e&&(0,a.jsx)("div",{children:(0,a.jsx)(m,{})}),"createAccess"===e&&(0,a.jsx)("div",{children:(0,a.jsx)(n,{})}),"logout"===e&&(0,a.jsx)("div",{children:"Logging Out..."})]}),(0,a.jsxs)("div",{className:"fixed bottom-0 left-0 w-full bg-white shadow-lg border-t flex justify-around py-3",children:[(0,a.jsxs)("button",{className:"flex flex-col items-center text-sm ".concat("home"===e?"text-blue-500":"text-gray-600"),onClick:()=>t("home"),children:[(0,a.jsx)(l.rQ8,{size:24}),"Home"]}),(0,a.jsxs)("button",{className:"flex flex-col items-center text-sm ".concat("Certificates"===e?"text-blue-500":"text-gray-600"),onClick:()=>t("Certificates"),children:[(0,a.jsx)(l.nBS,{size:24}),"Certificates"]}),(0,a.jsxs)("button",{className:"flex flex-col items-center text-sm ".concat("employee"===e?"text-blue-500":"text-gray-600"),onClick:()=>t("employee"),children:[(0,a.jsx)(l.p7b,{size:24}),"Users"]}),(0,a.jsxs)("button",{className:"flex flex-col items-center text-sm ".concat("createAccess"===e?"text-blue-500":"text-gray-600"),onClick:()=>t("createAccess"),children:[(0,a.jsx)(l.pXu,{size:24}),"Create Access"]}),(0,a.jsxs)("button",{className:"flex flex-col items-center text-sm text-red-500",onClick:g,children:[(0,a.jsx)(l.axc,{size:24}),"Logout"]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[883,951,563,864,673,465,301,93,264,841,636,593,792],()=>t(2223)),_N_E=e.O()}]);