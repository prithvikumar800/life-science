(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{8259:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/User",function(){return s(5733)}])},5733:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(4848),l=s(6540),r=s(8869),i=s(6665),n=s(3093);s(4338);var d=s(9196);let o=e=>{let{userData:t,loading:s}=e,[o,c]=(0,l.useState)((null==t?void 0:t.name)||""),[x,m]=(0,l.useState)((null==t?void 0:t.mobile)||""),[h,u]=(0,l.useState)(null),[b,p]=(0,l.useState)(!1),[f,j]=(0,l.useState)(!1),[g,N]=(0,l.useState)(!1),[y,w]=(0,l.useState)(!1),[v,S]=(0,l.useState)([]),[C,E]=(0,l.useState)(""),[k,_]=(0,l.useState)([]),[L,D]=(0,l.useState)(""),[P,T]=(0,l.useState)(!1),I=async()=>{let e=i.I.firestore();try{let t=(await e.collection("certificate").get()).docs.map(e=>({id:e.id,...e.data()}));S(t),_(t)}catch(e){console.error("Error fetching data: ",e),n.oR.error("There was an error fetching the data.")}};return((0,l.useEffect)(()=>{I()},[]),s)?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("div",{className:"spinner-border animate-spin inline-block w-16 h-16 border-4 rounded-full border-t-blue-500 border-gray-200"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"w-full bg-gradient-to-r from-blue-50 to-blue-100 p-8 rounded-xl shadow-xl",children:[(0,a.jsxs)("h1",{className:"md:text-4xl text-xl font-semibold text-center text-blue-600 mb-6",children:["Welcome, ",null==t?void 0:t.name]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 ease-in-out",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Name:"}),(0,a.jsx)("span",{className:"text-gray-900",children:null==t?void 0:t.name})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 ease-in-out",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Email:"}),(0,a.jsx)("span",{className:"text-gray-900",children:null==t?void 0:t.email})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 ease-in-out",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Mobile Number:"}),(0,a.jsx)("span",{className:"text-gray-900",children:null==t?void 0:t.mobile})]}),(0,a.jsxs)("button",{onClick:()=>{N(!0)},className:"text-blue-500 flex gap-4 font-bold hover:text-blue-700",children:[(0,a.jsx)(r.SG1,{className:"mt-1"})," Edit Profile"]})]})]}),!P&&(0,a.jsx)("div",{className:"min-h-screen bg-white flex px-4",children:(0,a.jsxs)("div",{className:"w-full bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-center text-teal-600 mb-6",children:"Enter Lotto Number"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Enter Lotto Number",value:L,onChange:e=>D(e.target.value)}),(0,a.jsx)("button",{onClick:()=>{L?T(!0):n.oR.error("Please enter a valid lotto number!")},className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-md",children:"Submit"})]})]})}),P&&(0,a.jsx)("div",{className:"min-h-screen bg-white flex px-4",children:(0,a.jsxs)("div",{className:"w-full bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-center text-teal-600 mb-6",children:"Search & Download Certificate Data"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Enter Lot Number",value:C,onChange:e=>E(e.target.value)}),(0,a.jsx)("button",{onClick:()=>{_(v.filter(e=>e.lotno&&e.lotno.includes(C)))},className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-md",children:"Search"})]}),(0,a.jsx)(n.N9,{}),k&&k.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full table-auto border-collapse bg-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Certificate Title"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Material Code"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Expiry Date"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Lot Number"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Verification Status"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-bold text-gray-700 border-b",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:k.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-teal-50",children:[(0,a.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:[t+1,".",e.certificateTitle]}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:e.materialCode}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:e.expiryDate}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:e.lotno}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:"True"===e.Verified?(0,a.jsx)("span",{className:"text-green-600 font-semibold",children:"Verified"}):(0,a.jsx)("span",{className:"text-red-600 font-semibold",children:"Pending"})}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-600 border-b uppercase",children:(0,a.jsx)("button",{onClick:()=>{u(e),p(!0)},className:"text-teal-600 uppercase hover:text-teal-800",children:"View PDF"})})]},t))})]})}):(0,a.jsx)("p",{className:"mt-4 text-center text-gray-600",children:"No matching certificates found"})]})}),b&&(0,a.jsx)("div",{className:"fixed inset-0 flex justify-center items-center bg-gray-800 bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl",children:[(0,a.jsx)(r.yGN,{className:"absolute top-4 right-4 text-gray-600 cursor-pointer",onClick:()=>p(!1)}),(0,a.jsx)(d.A,{fileUrl:null==h?void 0:h.pdfURL})]})})]})};var c=s(7037),x=s(6715);let m=()=>{let[e,t]=(0,l.useState)("home"),[s,r]=(0,l.useState)(null),[n,d]=(0,l.useState)(!0),m=(0,x.useRouter)();(0,l.useEffect)(()=>{let e=i.I.auth().onAuthStateChanged(async e=>{if(e)try{let t=i.I.firestore().collection("users").doc(e.uid),s=await t.get();s.exists?r(s.data()):console.log("No such user!")}catch(e){console.error("Error fetching user data:",e)}finally{d(!1)}else d(!1),m.push("/")});return()=>e()},[m]);let h=async()=>{try{await i.I.auth().signOut(),m.push("/")}catch(e){console.error("Logout failed:",e)}};return n?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("div",{className:"spinner-border animate-spin inline-block w-16 h-16 border-4 rounded-full border-t-blue-500 border-gray-200"})}):(0,a.jsxs)("div",{className:"flex flex-col h-screen justify-between",children:[(0,a.jsx)("div",{children:"home"===e&&(0,a.jsx)(o,{userData:s,loading:n})}),(0,a.jsxs)("div",{className:"fixed bottom-0 left-0 w-full bg-white shadow-lg border-t flex justify-around py-3",children:[(0,a.jsxs)("button",{className:"flex flex-col items-center text-sm ".concat("home"===e?"text-blue-500":"text-gray-600"),onClick:()=>t("home"),children:[(0,a.jsx)(c.rQ8,{size:24}),"Home"]}),(0,a.jsxs)("button",{className:"flex flex-col items-center text-sm text-red-500",onClick:h,children:[(0,a.jsx)(c.axc,{size:24}),"Logout"]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[883,951,563,864,673,465,301,93,264,841,636,593,792],()=>t(8259)),_N_E=e.O()}]);